<%- include("../partials/head.ejs") %>
    <body>
        <%- include("../partials/nav.ejs") %>

            <div class="container-fluid">
                <!-- Products cards start -->
                <div class="product-holder">

                    <div class="product-holder-img">
                        <img src="/uploads/resized/<%= product.picture%>" />
                    </div>

                    <div class="product-detail-div">
                        <div class="product-detail-box">
                            <div class="product-detail-banner">
                                <h2 class="product-detail-h2">
                                    <%= product.title %>
                                </h2>
                                <div class="brand-price">
                                    <p class="product-detail-p"> Brand: <%= product.brand %>
                                    </p>
                                    <p class="product-detail-p">
                                        <%= product.price %> SEK. (Incl. VAT)
                                    </p>
                                </div>
                                
                                <div class="description">
                                <p class="product-detail-description">
                                    <%= product.description %>
                                </p>
                            </div>
                            <div class="btns-shop"></div>
                                <!-- come back and remove border radius on these buttons later //Karwan and julia-->
                                
                                    <div class="dropdown">
                                        <button class="btn btn-size dropdown-toggle border-dark rounded-0" type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                            aria-expanded="false">
                                            Select size
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">
                                                <%= product.size %>
                                            </a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                        </div>
                                    </div>
                                    <div class="btn-bag">
                                        <a href="/cart/add/<%= product._id %>">
                                            <button type="button" class="btn btn-add-cart rounded-0"><i
                                                    class="fa-solid fa-bag-shopping fa-lg" aria-hidden="true"></i>Add to
                                                bag</button>
                                        </a>
                                    </div>
                                </div>
                                <center>
                                    <button class="btn btn-card"><a class="delete" data-doc="<%= product._id %>">Delete</a></button>
                                </center>

                            </div>
                        </div>
                    </div>

                    <br><br>
                        
                </div>

            </div>

            <center>
                <button class="btn btn-card"><a  href = "/review">Leave a comment</a></button>
            </center>

            <%- include("../partials/footer.ejs") %>

                  <!--Delete btn script-->
      <script>
        const trashcan = document.querySelector('a.delete');
        trashcan.addEventListener('click', (e) => {
          const endpoint = `/shop/delete/${trashcan.dataset.doc}`;
          fetch(endpoint, {
            method: 'DELETE',
          })
            .then(response => response.json())
            .then((data) => window.location.href = data.redirect)
            .catch(err => console.log(err));
        });

      </script>
    
    </body>